# Hottip Inventory Backend Repo Guidelines

## Project Structure

- **client/**: Vite-based React frontend using Wouter for routing, React Hook Form & Zod for forms.
- **server/**: Node.js/Express backend with modular route registries per domain and JWT auth.
- **shared/schema.ts**: Drizzle ORM table definitions plus Zod schemas shared across layers.
- **migrations/**: SQL migrations generated by Drizzle.

## Backend Notes

- Express app registers routes in `server/routes.ts` and delegates to domain registries.
- Authentication handled via JWT (`/api/login`) with development bypass; keep middleware in sync.
- Follow schema-first approach: define tables & Zod schemas in `shared/schema.ts` before using.
- Use storage helpers in `server/storage.ts` or Drizzle queries via `server/db.ts`.

## Frontend Notes

- Main app routing in `client/src/App.tsx`; pages live under `client/src/pages/` and domain components in `client/src/components/`.
- API calls should hit `/api/*`; Vite dev server proxies to backend.
- Forms should leverage shared Zod schemas where possible for validation parity with backend.

## Testing & Dev Workflow

- Start backend: `node server/index.ts` (ensure env vars like `JWT_SECRET` set if needed).
- Start frontend: `npm run dev` from repo root (Vite).
- Tests located under `server/tests/`; run with Node test runner (e.g., `npm test`).
- Database migrations managed via Drizzle; update `drizzle.config.ts` for connection settings.

## Coding Conventions

- Maintain clear error handling; log server errors and return structured JSON responses.
- Favor async/await with try/catch for server handlers.
- Keep shared schema updates synchronized between backend routes and frontend forms.
- Separate domain logic into relevant registries (accounts, logistics, marketing, etc.).

## Additional Tips

- Reuse existing helper utilities before creating new ones.
- When adding new endpoints, update both backend route registry and frontend service layer.
- Respect role-based access control defined in middleware (admin, manager, etc.).
